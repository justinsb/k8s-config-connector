apiVersion: monitoring.cnrm.cloud.google.com/v1beta1
kind: MonitoringDashboard
metadata:
  annotations:
    cnrm.cloud.google.com/management-conflict-prevention-policy: none
  finalizers:
  - cnrm.cloud.google.com/finalizer
  - cnrm.cloud.google.com/deletion-defender
  generation: 2
  labels:
    cnrm-test: "true"
  name: monitoringdashboard-${uniqueId}
  namespace: ${uniqueId}
spec:
  displayName: monitoringdashboard-full
  mosaicLayout:
    columns: 2
    tiles:
    - height: 2
      widget:
        title: Widget 1
        xyChart:
          dataSets:
          - plotType: LINE
            timeSeriesQuery:
              timeSeriesFilter:
                aggregation:
                  perSeriesAligner: ALIGN_RATE
                filter: metric.type="agent.googleapis.com/nginx/connections/accepted_count"
              unitOverride: "1"
          timeshiftDuration: 600.500s
          yAxis:
            label: y1Axis
            scale: LINEAR
      width: 2
      xPos: 0
      yPos: 0
    - height: 1
      widget:
        text:
          content: Widget 2
          format: MARKDOWN
          style:
            backgroundColor: '#000'
            fontSize: FS_LARGE
            horizontalAlignment: H_CENTER
            padding: P_MEDIUM
            pointerLocation: PL_TOP_LEFT
            textColor: '#fff'
            verticalAlignment: V_CENTER
      width: 2
      xPos: 0
      yPos: 2
    - height: 2
      widget:
        title: Widget 3
        xyChart:
          dataSets:
          - plotType: STACKED_BAR
            timeSeriesQuery:
              timeSeriesFilter:
                aggregation:
                  perSeriesAligner: ALIGN_RATE
                filter: metric.type="agent.googleapis.com/nginx/connections/accepted_count"
              unitOverride: "1"
          yAxis:
            label: y1Axis
            scale: LINEAR
      width: 2
      xPos: 0
      yPos: 3
    - height: 1
      widget:
        logsPanel:
          filter: metric.type="agent.googleapis.com/nginx/connections/accepted_count"
          resourceNames:
          - external: projects/${projectId}
        title: Widget 4
      width: 2
      xPos: 0
      yPos: 5
    - height: 1
      widget:
        sectionHeader:
          dividerBelow: true
          subtitle: Example SectionHeader
        title: SectionHeader Widget
      width: 2
      xPos: 0
      yPos: 6
    - height: 1
      widget:
        collapsibleGroup:
          collapsed: true
        title: CollapsibleGroup Widget
      width: 2
      xPos: 0
      yPos: 7
    - height: 1
      widget:
        alertChart:
          alertPolicyRef:
            name: monitoringalertpolicy-${uniqueId}
        title: AlertChart Widget
      width: 2
      xPos: 0
      yPos: 8
  projectRef:
    external: ${projectId}
  resourceID: monitoringdashboard-${uniqueId}
status:
  conditions:
  - lastTransitionTime: "1970-01-01T00:00:00Z"
    message: The resource is up to date
    reason: UpToDate
    status: "True"
    type: Ready
  etag: abcdef123456
  observedGeneration: 2
